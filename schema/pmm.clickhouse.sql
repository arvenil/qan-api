CREATE TABLE IF NOT EXISTS query_class_metrics (
    EventDate Date,
    query_class_id UInt32,
    instance_id UInt32,
    start_ts DateTime,
    end_ts DateTime,
    query_count UInt64,
    lrq_count UInt64,
    Query_time_sum Float32,
    Query_time_min Float32,
    Query_time_max Float32,
    Query_time_avg Float32,
    Query_time_p95 Float32,
    Query_time_stddev Float32,
    Query_time_med Float32,
    Lock_time_sum Float32,
    Lock_time_min Float32,
    Lock_time_max Float32,
    Lock_time_avg Float32,
    Lock_time_p95 Float32,
    Lock_time_stddev Float32,
    Lock_time_med Float32,
    Rows_sent_sum UInt64,
    Rows_sent_min UInt64,
    Rows_sent_max UInt64,
    Rows_sent_avg UInt64,
    Rows_sent_p95 UInt64,
    Rows_sent_stddev UInt64,
    Rows_sent_med UInt64,
    Rows_examined_sum UInt64,
    Rows_examined_min UInt64,
    Rows_examined_max UInt64,
    Rows_examined_avg UInt64,
    Rows_examined_p95 UInt64,
    Rows_examined_stddev UInt64,
    Rows_examined_med UInt64,
    Rows_affected_sum UInt64,
    Rows_affected_min UInt64,
    Rows_affected_max UInt64,
    Rows_affected_avg UInt64,
    Rows_affected_p95 UInt64,
    Rows_affected_stddev UInt64,
    Rows_affected_med UInt64,
    Rows_read_sum UInt64,
    Rows_read_min UInt64,
    Rows_read_max UInt64,
    Rows_read_avg UInt64,
    Rows_read_p95 UInt64,
    Rows_read_stddev UInt64,
    Rows_read_med UInt64,
    Merge_passes_sum UInt64,
    Merge_passes_min UInt64,
    Merge_passes_max UInt64,
    Merge_passes_avg UInt64,
    Merge_passes_p95 UInt64,
    Merge_passes_stddev UInt64,
    Merge_passes_med UInt64,
    InnoDB_IO_r_ops_sum UInt64,
    InnoDB_IO_r_ops_min UInt64,
    InnoDB_IO_r_ops_max UInt64,
    InnoDB_IO_r_ops_avg UInt64,
    InnoDB_IO_r_ops_p95 UInt64,
    InnoDB_IO_r_ops_stddev UInt64,
    InnoDB_IO_r_ops_med UInt64,
    InnoDB_IO_r_bytes_sum UInt64,
    InnoDB_IO_r_bytes_min UInt64,
    InnoDB_IO_r_bytes_max UInt64,
    InnoDB_IO_r_bytes_avg UInt64,
    InnoDB_IO_r_bytes_p95 UInt64,
    InnoDB_IO_r_bytes_stddev UInt64,
    InnoDB_IO_r_bytes_med UInt64,
    InnoDB_IO_r_wait_sum Float32,
    InnoDB_IO_r_wait_min Float32,
    InnoDB_IO_r_wait_max Float32,
    InnoDB_IO_r_wait_avg Float32,
    InnoDB_IO_r_wait_p95 Float32,
    InnoDB_IO_r_wait_stddev Float32,
    InnoDB_IO_r_wait_med Float32,
    InnoDB_rec_lock_wait_sum Float32,
    InnoDB_rec_lock_wait_min Float32,
    InnoDB_rec_lock_wait_max Float32,
    InnoDB_rec_lock_wait_avg Float32,
    InnoDB_rec_lock_wait_p95 Float32,
    InnoDB_rec_lock_wait_stddev Float32,
    InnoDB_rec_lock_wait_med Float32,
    InnoDB_queue_wait_sum Float32,
    InnoDB_queue_wait_min Float32,
    InnoDB_queue_wait_max Float32,
    InnoDB_queue_wait_avg Float32,
    InnoDB_queue_wait_p95 Float32,
    InnoDB_queue_wait_stddev Float32,
    InnoDB_queue_wait_med Float32,
    InnoDB_pages_distinct_sum UInt64,
    InnoDB_pages_distinct_min UInt64,
    InnoDB_pages_distinct_max UInt64,
    InnoDB_pages_distinct_avg UInt64,
    InnoDB_pages_distinct_p95 UInt64,
    InnoDB_pages_distinct_stddev UInt64,
    InnoDB_pages_distinct_med UInt64,
    QC_Hit_sum UInt64,
    Full_scan_sum UInt64,
    Full_join_sum UInt64,
    Tmp_table_sum UInt64,
    Tmp_table_on_disk_sum UInt64,
    Filesort_sum UInt64,
    Filesort_on_disk_sum UInt64,
    Query_length_sum UInt64,
    Query_length_min UInt64,
    Query_length_max UInt64,
    Query_length_avg UInt64,
    Query_length_p95 UInt64,
    Query_length_stddev UInt64,
    Query_length_med UInt64,
    Bytes_sent_sum UInt64,
    Bytes_sent_min UInt64,
    Bytes_sent_max UInt64,
    Bytes_sent_avg UInt64,
    Bytes_sent_p95 UInt64,
    Bytes_sent_stddev UInt64,
    Bytes_sent_med UInt64,
    Tmp_tables_sum UInt64,
    Tmp_tables_min UInt64,
    Tmp_tables_max UInt64,
    Tmp_tables_avg UInt64,
    Tmp_tables_p95 UInt64,
    Tmp_tables_stddev UInt64,
    Tmp_tables_med UInt64,
    Tmp_disk_tables_sum UInt64,
    Tmp_disk_tables_min UInt64,
    Tmp_disk_tables_max UInt64,
    Tmp_disk_tables_avg UInt64,
    Tmp_disk_tables_p95 UInt64,
    Tmp_disk_tables_stddev UInt64,
    Tmp_disk_tables_med UInt64,
    Tmp_table_sizes_sum UInt64,
    Tmp_table_sizes_min UInt64,
    Tmp_table_sizes_max UInt64,
    Tmp_table_sizes_avg UInt64,
    Tmp_table_sizes_p95 UInt64,
    Tmp_table_sizes_stddev UInt64,
    Tmp_table_sizes_med UInt64,
    Errors_sum UInt64,
    Warnings_sum UInt64,
    Select_full_range_join_sum UInt64,
    Select_range_sum UInt64,
    Select_range_check_sum UInt64,
    Sort_range_sum UInt64,
    Sort_rows_sum UInt64,
    Sort_scan_sum UInt64,
    No_index_used_sum UInt64,
    No_good_index_used_sum UInt64
) ENGINE = MergeTree(EventDate, (query_class_id, instance_id, start_ts), 8192);

